<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        :root { --primary-blue: #3b82f6; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #101f30;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0; overflow: hidden;
        }
        .login-card {
            background: linear-gradient(135deg, #1c2e42 0%, #293d55 100%);
            color: #e0f2fe; border: 1px solid #334e68;
            animation: fadeIn 1s ease-out;
        }
        .wave-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; overflow: hidden; }
        .wave-bg::before, .wave-bg::after {
            content: ""; position: absolute; bottom: 0; width: 150%;
            border-radius: 45% 55% 0% 0%; opacity: 0.5;
            animation: wave 10s linear infinite alternate;
        }
        .wave-bg::before { height: 200px; background-color: #1e4063; }
        .wave-bg::after {
            height: 180px; background-color: #00a896;
            border-radius: 40% 60% 0% 0%; opacity: 0.4;
            animation: wave 12s linear reverse infinite alternate;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: translateY(0);} }
        @keyframes wave { 0% { transform: translateX(0) translateY(50%);} 100% { transform: translateX(-50%) translateY(50%);} }
        .login-content { z-index: 10; }
        .input-field {
            transition: all 0.3s ease;
            background-color: #1c2e42; color: #e0f2fe; border-color: #334e68;
        }
        .input-field:focus {
            box-shadow: 0 0 0 3px rgba(59,130,246,0.5);
            border-color: var(--primary-blue);
            background-color: #101f30;
        }
        .login-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(59,130,246,0.4),
                        0 2px 4px -2px rgba(59,130,246,0.4);
            background-color: var(--primary-blue);
        }
        .login-button:hover {
            transform: translateY(-2px);
            background-color: #2563eb;
            box-shadow: 0 10px 15px -3px rgba(59,130,246,0.6),
                        0 4px 6px -4px rgba(59,130,246,0.6);
        }
        .error-message {
            max-height: 0; overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
        }
        .error-message.visible {
            max-height: 50px; opacity: 1;
        }
    </style>
</head>
<body>
    <div class="wave-bg"></div>

    <div class="login-content max-w-sm w-full mx-4 p-8 sm:p-10 rounded-2xl shadow-2xl login-card">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold tracking-tight" style="color: #e0f2fe;">Welcome Back</h1>
            <p class="mt-2" style="color: #94a3b8;">Sign in to access your investment portfolio.</p>
        </div>

        <form id="login-form" class="space-y-6">
            <div>
                <label for="user-id" class="block text-sm font-medium mb-1" style="color: #e0f2fe;">User Name</label>
                <input type="text" id="user-id" required class="input-field w-full px-4 py-2 rounded-xl focus:outline-none focus:ring-0">
            </div>

            <div>
                <label for="password" class="block text-sm font-medium mb-1" style="color: #e0f2fe;">Password</label>
                <input type="password" id="password" required class="input-field w-full px-4 py-2 rounded-xl focus:outline-none focus:ring-0" placeholder="Default: root">
            </div>
            
            <div id="error-box" class="error-message p-3 bg-red-800/30 border border-red-500 text-red-300 rounded-xl text-sm" role="alert"></div>

            <div>
                <button type="submit" class="login-button w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-lg text-sm font-semibold text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Log In
                </button>
            </div>
        </form>

        <p class="mt-6 text-center text-xs" style="color: #64748b;">Default password is <strong>root</strong></p>
    </div>

    <script>
        // --- Redirect if user already logged in ---
        const existingUser = localStorage.getItem('userId');
        if (existingUser) {
            window.location.href = 'invest.html';
        }

        // --- User ID validation ---
        function validateUserId(userId) {
            return userId.length >= 4;
        }

        // --- Login handler ---
        document.getElementById('login-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const userId = document.getElementById('user-id').value.trim();
            const password = document.getElementById('password').value.trim();
            const errorBox = document.getElementById('error-box');
            const submitButton = document.querySelector('.login-button');

            errorBox.classList.remove('visible');
            errorBox.textContent = "";

            if (!validateUserId(userId)) {
                errorBox.textContent = "User Name must be at least 4 characters long.";
                errorBox.classList.add('visible');
                return;
            }

            if (password !== "root") {
                errorBox.textContent = "Incorrect password. The default password is 'root'.";
                errorBox.classList.add('visible');
                return;
            }

            // Save details & redirect
            localStorage.setItem('userId', userId);
            localStorage.setItem('password', password);
            submitButton.disabled = true;
            submitButton.textContent = 'Redirecting...';
            window.location.href = 'invest.html';
        });
    </script>
</body>
</html>